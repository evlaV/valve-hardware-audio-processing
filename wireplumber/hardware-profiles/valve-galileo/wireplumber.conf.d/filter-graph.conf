node.filter-graph.rules = [
  {
    matches = [
      {
        media.class = "Audio/Sink"
        alsa.card_name = "sof-nau8821-max"
        device.profile.description = "Speaker"
      }
    ]
    actions = {
      create-filter-graph = [
        {
          nodes = [
            {
              type = lv2,
              name = valve_deck_speakers,
              plugin = "https://faustlv2.bitbucket.io/valve_deck_speakers",
              label = valve_deck_speakers
            }
          ]
        }
      ]
    }
  }
  {
    matches = [
      {
        media.class = "Audio/Source"
        alsa.card_name = "sof-nau8821-max"
      }
    ]
    actions = {
      create-filter-graph = [
        {
          nodes = [
            {
              type = lv2,
              name = valve_deck_microphone,
              plugin = "https://faustlv2.bitbucket.io/valve_deck_microphone",
              label = valve_deck_microphone
            }
          ]
        }
      ]
    }
  }
]

